<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¯ ìƒí™©ë³„ ë ˆì‹œí”¼</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #meal-rice, #meal-noodles, #meal-soups, #meal-etc {
      display: none;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <nav class="menu">
    <a href="index.html">ğŸ§‚ ì¬ë£Œë¡œ ì°¾ê¸°</a>
    <a href="time.html">â± ì‹œê°„ë³„</a>
    <a href="method.html">ğŸ”¥ ì¡°ë¦¬ë°©ì‹ë³„</a>
    <a href="situation.html">ğŸ¯ ìƒí™©ë³„</a>
  </nav>

  <h1>ğŸ¯ ìƒí™©ë³„ ë ˆì‹œí”¼</h1>

  <section class="section">
    <h2 onclick="toggleSection('sick-recipes')">ğŸŒ™ ì•„í”ˆ ë‚ </h2>
    <div id="sick-recipes" class="hidden"></div>
  </section>

  <section class="section">
    <h2 onclick="toggleSection('diet-recipes')">ğŸƒ ë‹¤ì´ì–´íŠ¸</h2>
    <div id="diet-recipes" class="hidden"></div>
  </section>

  <section class="section">
    <h2>ğŸš í•œ ë¼ ì‹ì‚¬</h2>
    <label><input type="checkbox" onchange="toggleMealType(this, 'meal-rice', mealRice)" /> ë°¥</label>
    <label><input type="checkbox" onchange="toggleMealType(this, 'meal-noodles', mealNoodles)" /> ë©´</label>
    <label><input type="checkbox" onchange="toggleMealType(this, 'meal-soups', mealSoups)" /> êµ­/ì°Œê°œ</label>
    <label><input type="checkbox" onchange="toggleMealType(this, 'meal-etc', mealEtc)" /> ê¸°íƒ€</label>

    <div id="meal-rice"></div>
    <div id="meal-noodles"></div>
    <div id="meal-soups"></div>
    <div id="meal-etc"></div>
  </section>

  <section class="section">
    <h2 onclick="toggleSection('snack-recipes')">ğŸ˜ ë°˜ì°¬</h2>
    <div id="snack-recipes" class="hidden"></div>
  </section>

  <script src="js/recipes.js"></script>
  <script>
    function toggleSection(id) {
      const el = document.getElementById(id);
      el.classList.toggle("hidden");
    }

    function toggleRecipe(id) {
      const el = document.getElementById(`recipe-${id}`);
      if (!el) return;
      el.style.display = el.style.display === "none" ? "block" : "none";
    }

    function toggleMealType(checkbox, id, recipeList) {
      const el = document.getElementById(id);
      if (!el) return;
      if (checkbox.checked) {
        if (!el.innerHTML.trim()) {
          renderRecipeList(id, recipeList);
        }
        el.style.display = "block";
      } else {
        el.style.display = "none";
      }
    }

    // ë°ì´í„° í•„í„°ë§
    const sickList = allRecipes.filter(r => r.situation === "ì•„í”ˆë‚ ");
    const dietList = allRecipes.filter(r => r.situation === "ë‹¤ì´ì–´íŠ¸");
    const morningList = allRecipes.filter(r => r.situation === "ê°„ë‹¨í•œ ì•„ì¹¨");
    const snackList = allRecipes.filter(r => r.situation === "ê°„ì‹/ë°˜ì°¬");
    const mealNoodles = allRecipes.filter(r => r.situation === "í•œë¼ì‹ì‚¬" && r.mealType === "ë©´");
    const mealSoups = allRecipes.filter(r => r.situation === "í•œë¼ì‹ì‚¬" && r.mealType === "êµ­/ì°Œê°œ");
    const mealRice = allRecipes.filter(r => r.situation === "í•œë¼ì‹ì‚¬" && r.mealType === "ë°¥");
    const mealEtc = allRecipes.filter(r => r.situation === "í•œë¼ì‹ì‚¬" && r.mealType === "ê¸°íƒ€");

    function renderRecipeList(containerId, recipeList) {
      const container = document.getElementById(containerId);
      if (!container || !recipeList.length) {
        container.innerHTML = "<p>ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        return;
      }

      container.innerHTML = recipeList.map((r, index) => `
        <div class="recipe-item">
          <div class="recipe-header" onclick="toggleRecipe('${containerId}-${index}')">
            ğŸ½ <strong>${r.name}</strong>
          </div>
          <div class="recipe-details" id="recipe-${containerId}-${index}" style="display: none;">
            <p><strong>ì¬ë£Œ:</strong> ${r.ingredients.join(', ')}</p>
            <p><strong>ë°©ë²•:</strong><br>${r.instructions.replace(/\n/g, "<br>")}</p>
          </div>
        </div>
      `).join('');
    }

    window.onload = function () {
      renderRecipeList("sick-recipes", sickList);
      renderRecipeList("diet-recipes", dietList);
      renderRecipeList("morning-recipes", morningList);
      renderRecipeList("snack-recipes", snackList);
    };
  </script>
</body>
</html>
